(function(a){a.fn.graphTable=function(c,d){var b={series:"columns",labels:0,xaxis:0,firstSeries:1,lastSeries:null,dataStart:1,dataEnd:null,position:"after",width:null,height:null,min:0,max:0,dataTransform:null,labelTransform:null,xaxisTransform:null,colors:null};a.extend(true,b,c);if(!b.lastSeries){b.lastSeries=(b.series=="columns")?a("tr",a(this)).eq(b.labels).find("th,td").length-1:a("tr",a(this)).length-1}if(!b.dataEnd){b.dataEnd=(b.series=="rows")?a("tr",a(this)).eq(b.firstSeries).find("th,td").length-1:a("tr",a(this)).length-1}return a(this).each(function(){var t=a(this);if(!t.is("table")){return}if(!b.width){b.width=t.width()}if(!b.height){b.height=t.height()}var l=b.min;var o=b.max;var s=a("tr",t);var g=new Array();switch(b.series){case"rows":var k=s.eq(b.xaxis);for(i=b.firstSeries;i<=b.lastSeries;i++){var h=new Array();$dataRow=a("tr",t).eq(i);var q=a("th,td",$dataRow).eq(b.labels).text();if(b.labelTransform){q=b.labelTransform(q)}for(j=b.dataStart;j<=b.dataEnd;j++){var p=a("th,td",k).eq(j).text();var n=a("th,td",$dataRow).eq(j).text();if(b.dataTransform){n=b.dataTransform(n)}if(b.xaxisTransform){p=b.xaxisTransform(p)}test_x=parseFloat(p);test_y=parseFloat(n);if(test_y<l){l=test_y}else{if(test_y>o){o=test_y}}h[h.length]=[p,n]}g[g.length]={label:q,data:h}}break;case"columns":var r=s.eq(b.labels);for(j=b.firstSeries;j<=b.lastSeries;j++){var f=new Array();var q=r.find("th,td").eq(j).text();if(b.labelTransform){q=b.labelTransform(q)}for(i=b.dataStart;i<=b.dataEnd;i++){$cell=s.eq(i).find("th,td").eq(j);var n=$cell.text();var p=s.eq(i).find("th,td").eq(b.xaxis).text();if(b.dataTransform){n=b.dataTransform(n)}if(b.xaxisTransform){p=b.xaxisTransform(p)}test_x=parseFloat(p);test_y=parseFloat(n);if(test_y<l){l=test_y}else{if(test_y>o){o=test_y}}f[f.length]=[p,n]}var m={label:q,data:f};if(b.colors&&b.colors[j-b.dataStart]){m.color=b.colors[j-b.dataStart]}g[g.length]=m}break}switch(b.position){case"after":$div=a('<div class="chart_flot" />').insertAfter(t);break;case"replace":$div=a('<div class="chart_flot" />').insertAfter(t);t.remove();break;default:$div=a('<div class="chart_flot" />').insertBefore(t);break}var e={yaxis:{min:l,max:o},title:"foo"};$div.width(b.width).height(b.height);a.extend(true,e,d);a.plot($div,g,e)})}})(jQuery);