(function(a){a.fn.adipoli=function(b){var e=a.extend({startEffect:"transparent",hoverEffect:"normal",imageOpacity:0.5,animSpeed:300,fillColor:"#000",textColor:"#fff",overlayText:"",slices:10,boxCols:5,boxRows:3,popOutMargin:10,popOutShadow:10},b);a(this).one("load",function(){a(this).wrap(function(){return'<div class="adipoli-wrapper '+a(this).attr("class")+'" style="width:'+a(this).width()+"px; height:"+a(this).height()+'px;"/>'});a(this).parent().append('<div class="adipoli-before '+a(this).attr("class")+'" style="display:none;width:'+a(this).width()+"px; height:"+a(this).height()+'px;"><img src="'+a(this).attr("src")+'"/></div>');a(this).parent().append('<div class="adipoli-after '+a(this).attr("class")+'" style="display:none;width:'+a(this).width()+"px; height:"+a(this).height()+'px;"></div>');if(e.startEffect=="transparent"){a(this).hide();a(this).siblings(".adipoli-before").css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+e.imageOpacity*100+')"',filter:"alpha(opacity="+e.imageOpacity*100+")","-moz-opacity":e.imageOpacity,"-khtml-opacity":e.imageOpacity,opacity:e.imageOpacity}).show()}else{if(e.startEffect=="grayscale"){var h=a(this);h.hide();h.siblings(".adipoli-before").show();h.siblings(".adipoli-before").children("img").each(function(){this.src=f(this.src)})}else{if(e.startEffect=="normal"){a(this).hide();a(this).siblings(".adipoli-before").show()}else{if(e.startEffect=="overlay"){h=a(this);h.hide();a(this).siblings(".adipoli-before").html(e.overlayText).css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+e.imageOpacity*100+')"',filter:"alpha(opacity="+e.imageOpacity*100+")","-moz-opacity":e.imageOpacity,"-khtml-opacity":e.imageOpacity,opacity:e.imageOpacity,background:e.fillColor,color:e.textColor}).fadeIn();h.show()}}}}a(this).parent().bind("mouseenter",function(){if(e.hoverEffect=="normal"){var n=a(this);n.children(".adipoli-after").html('<img src="'+n.children("img").attr("src")+'"/>').fadeIn(e.animSpeed)}else{if(e.hoverEffect=="popout"){n=a(this);var j=n.children("img").width();var k=n.children("img").height();n.children(".adipoli-after").html('<img src="'+n.children("img").attr("src")+'"/>');var q=n.children(".adipoli-after").children("img");q.width(j+2*e.popOutMargin);q.height(k+2*e.popOutMargin);n.children(".adipoli-after").width(j+2*e.popOutMargin);n.children(".adipoli-after").height(k+2*e.popOutMargin);n.children(".adipoli-after").css({left:"-"+e.popOutMargin+"px",top:"-"+e.popOutMargin+"px","box-shadow":"0px 0px "+e.popOutShadow+"px #000"}).show()}else{if(e.hoverEffect=="sliceDown"||e.hoverEffect=="sliceDownLeft"||e.hoverEffect=="sliceUp"||e.hoverEffect=="sliceUpLeft"||e.hoverEffect=="sliceUpRandom"||e.hoverEffect=="sliceDownRandom"){a(this).children(".adipoli-after").show();g(a(this),e);var l=0;var o=0;var w=a(".adipoli-slice",a(this));if(e.hoverEffect=="sliceDownLeft"||e.hoverEffect=="sliceUpLeft"){w=a(".adipoli-slice",a(this))._reverse()}if(e.hoverEffect=="sliceUpRandom"||e.hoverEffect=="sliceDownRandom"){w=c(a(".adipoli-slice",a(this)))}w.each(function(){var i=a(this);if(e.hoverEffect=="sliceDown"||e.hoverEffect=="sliceDownLeft"){i.css({top:"0px"})}else{if(e.hoverEffect=="sliceUp"||e.hoverEffect=="sliceUpLeft"){i.css({bottom:"0px"})}}if(o==e.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},e.animSpeed,"",function(){})},(100+l))}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},e.animSpeed)},(100+l))}l+=50;o++})}else{if(e.hoverEffect=="sliceUpDown"||e.hoverEffect=="sliceUpDownLeft"){a(this).children(".adipoli-after").show();g(a(this),e);l=0;o=0;var x=0;w=a(".adipoli-slice",a(this));if(e.hoverEffect=="sliceUpDownLeft"){w=a(".adipoli-slice",a(this))._reverse()}w.each(function(){var i=a(this);if(o==0){i.css("top","0px");o++}else{i.css("bottom","0px");o=0}if(x==e.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},e.animSpeed,"",function(){})},(100+l))}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},e.animSpeed)},(100+l))}l+=50;x++})}else{if(e.hoverEffect=="fold"||e.hoverEffect=="foldLeft"){a(this).children(".adipoli-after").show();n=a(this);g(n,e);l=0;o=0;w=a(".adipoli-slice",n);if(e.hoverEffect=="foldLeft"){w=a(".adipoli-slice",a(this))._reverse()}w.each(function(){var i=a(this);var v=i.width();i.css({top:"0px",height:"100%",width:"0px"});if(o==e.slices-1){setTimeout(function(){i.animate({width:v,opacity:"1.0"},e.animSpeed,"",function(){})},(100+l))}else{setTimeout(function(){i.animate({width:v,opacity:"1.0"},e.animSpeed)},(100+l))}l+=50;o++})}else{if(e.hoverEffect=="boxRandom"){a(this).children(".adipoli-after").show();n=a(this);d(n,e);var t=e.boxCols*e.boxRows;o=0;l=0;var p=c(a(".adipoli-box",n));p.each(function(){var i=a(this);if(o==t-1){setTimeout(function(){i.animate({opacity:"1"},e.animSpeed,"",function(){})},(100+l))}else{setTimeout(function(){i.animate({opacity:"1"},e.animSpeed)},(100+l))}l+=20;o++})}else{if(e.hoverEffect=="boxRain"||e.hoverEffect=="boxRainReverse"||e.hoverEffect=="boxRainGrow"||e.hoverEffect=="boxRainGrowReverse"){a(this).children(".adipoli-after").show();n=a(this);d(n,e);t=e.boxCols*e.boxRows;o=0;l=0;var s=0;var u=0;var y=new Array();y[s]=new Array();p=a(".adipoli-box",n);if(e.hoverEffect=="boxRainReverse"||e.hoverEffect=="boxRainGrowReverse"){p=a(".adipoli-box",n)._reverse()}p.each(function(){y[s][u]=a(this);u++;if(u==e.boxCols){s++;u=0;y[s]=new Array()}});for(var r=0;r<(e.boxCols*2);r++){var m=r;for(var z=0;z<e.boxRows;z++){if(m>=0&&m<e.boxCols){(function(F,A,E,B,G){var D=a(y[F][A]);var v=D.width();var C=D.height();if(e.hoverEffect=="boxRainGrow"||e.hoverEffect=="boxRainGrowReverse"){D.width(0).height(0)}if(B==G-1){setTimeout(function(){D.animate({opacity:"1",width:v,height:C},e.animSpeed/1.3,"",function(){})},(100+E))}else{setTimeout(function(){D.animate({opacity:"1",width:v,height:C},e.animSpeed/1.3)},(100+E))}})(z,m,l,o,t);o++}m--}l+=100}}}}}}}}});a(this).parent().bind("mouseleave",function(){a(this).children(".adipoli-after").html("").hide()})}).each(function(){if(this.complete){a(this).load()}});return a(this);function g(j,k){for(var h=0;h<k.slices;h++){var l=Math.round(j.width()/k.slices);if(h==k.slices-1){j.children(".adipoli-after").append(a('<div class="adipoli-slice"></div>').css({left:(l*h)+"px",width:(j.width()-(l*h))+"px",height:"0px",opacity:"0",background:'url("'+j.children("img").attr("src")+'") no-repeat -'+((l+(h*l))-l)+"px 0%"}))}else{j.children(".adipoli-after").append(a('<div class="adipoli-slice"></div>').css({left:(l*h)+"px",width:l+"px",height:"0px",opacity:"0",background:'url("'+j.children("img").attr("src")+'") no-repeat -'+((l+(h*l))-l)+"px 0%"}))}}}function d(h,i){var j=Math.round(h.width()/i.boxCols);var m=Math.round(h.height()/i.boxRows);for(var k=0;k<i.boxRows;k++){for(var l=0;l<i.boxCols;l++){if(l==i.boxCols-1){h.children(".adipoli-after").append(a('<div class="adipoli-box"></div>').css({opacity:0,left:(j*l)+"px",top:(m*k)+"px",width:(h.width()-(j*l))+"px",height:m+"px",background:'url("'+h.children("img").attr("src")+'") no-repeat -'+((j+(l*j))-j)+"px -"+((m+(k*m))-m)+"px"}))}else{h.children(".adipoli-after").append(a('<div class="adipoli-box"></div>').css({opacity:0,left:(j*l)+"px",top:(m*k)+"px",width:j+"px",height:m+"px",background:'url("'+h.children("img").attr("src")+'") no-repeat -'+((j+(l*j))-j)+"px -"+((m+(k*m))-m)+"px"}))}}}}function c(k){for(var l,h,m=k.length;m;l=parseInt(Math.random()*m),h=k[--m],k[m]=k[l],k[l]=h){}return k}function f(h){var k=document.createElement("canvas");var q=k.getContext("2d");var l=new Image();l.src=h;k.width=l.width;k.height=l.height;q.drawImage(l,0,0);var j=q.getImageData(0,0,k.width,k.height);for(var o=0;o<j.height;o++){for(var p=0;p<j.width;p++){var m=(o*4)*j.width+p*4;var n=(j.data[m]+j.data[m+1]+j.data[m+2])/3;j.data[m]=n;j.data[m+1]=n;j.data[m+2]=n}}q.putImageData(j,0,0,0,0,j.width,j.height);return k.toDataURL()}};a.fn._reverse=[].reverse})(jQuery);